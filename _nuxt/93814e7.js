(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1046:function(t,n,e){"use strict";e.r(n);var r=e(12),o=(e(52),e(80),e(451)),c={data:function(){return{env:"testnet",loading:!0,effectsdk:null,id:parseInt(this.$route.params.id),tasks:null,results:null,timer:null,batch:null,batchIpfs:null,campaign:null}},computed:{batchPercentageDone:function(){return this.batch?Math.round(this.batch.tasks_done/(this.batch.num_tasks*this.batch.repetitions)*100):0}},mounted:function(){var t=this;this.effectsdk=new o.EffectClient(this.env),this.getBatch(),this.getResults(),this.timer=setInterval((function(){t.getResults()}),3e4)},beforeDestroy:function(){clearInterval(this.timer)},methods:{getBatch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,t.effectsdk.force.getBatchById(t.id);case 3:return t.batch=n.sent,n.next=6,t.effectsdk.force.getIpfsContent(t.batch.content.field_1);case 6:return t.batchIpfs=n.sent,n.next=9,t.effectsdk.force.getCampaign(t.batch.campaign_id);case 9:t.campaign=n.sent,t.loading=!1,console.log("getBatch",t.batch,t.batchIpfs,t.campaign);case 12:case"end":return n.stop()}}),n)})))()},getResults:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("getting results..."),e=0,t.results&&(e=t.results.length),n.next=5,t.effectsdk.force.getSubmissionsOfBatch(t.id);case 5:t.results=n.sent,console.log("results",t.results),t.results.length!==e&&(console.log("results changed"),t.getBatch());case 8:case"end":return n.stop()}}),n)})))()}}},l=e(63),component=Object(l.a)(c,(function(){var t=this,n=t._self._c;return n("div",{staticClass:"section pt-6"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-three-fifths is-offset-one-fifth"},[n("h2",{staticClass:"title"},[t._v("\n        Order\n      ")]),t._v(" "),t.loading?n("div",{staticClass:"loading-text"},[t._v("\n        Loading\n      ")]):n("div",[t.batch&&t.campaign?n("div",[n("br"),t._v(" "),n("br"),t._v(" "),n("div",{staticClass:"box media p-6"},[n("div",{staticClass:"media-content"},[n("div",{staticClass:"content"},[n("p",{staticClass:"subtitle"},[n("a",{attrs:{href:"https://app.effect.network/campaigns/".concat(t.batch.campaign_id),target:"_blank",rel:"noopener noreferrer"}},[n("span",{staticClass:"icon-text"},[n("span",[t._v(t._s(t.campaign.info.title))])])])]),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"subtitle"},[t._v("\n                  Details\n                ")]),t._v(" "),n("div",{staticClass:"px-6"},[n("p",[n("span",[t._v("Order ID: "),n("strong",[t._v(t._s(t.id))])]),t._v(" "),n("br"),t._v(" "),n("span",[t._v("Status: "),n("strong",[t._v(t._s(t.batchPercentageDone)+"%")])])]),t._v(" "),n("table",{staticClass:"table is-narrow is-centered"},[n("thead"),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("Tasks")]),t._v(" "),n("td",[t._v(t._s(t.batch.num_tasks)+" ×")])]),t._v(" "),n("tr",[n("td",[t._v("Amount")]),t._v(" "),n("td",[t._v(t._s(t.batch.repetitions)+" ×")])]),t._v(" "),n("tr",[n("td",[t._v("Cost per Task")]),t._v(" "),n("td",[n("strong",[t._v(t._s(t.campaign.info.reward)+" EFX")])])])]),t._v(" "),n("tfoot",[n("tr",[n("td",[t._v("Total Cost")]),t._v(" "),n("td",[n("strong",[t._v(t._s(t.batch.balance.quantity))])])])])])]),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"subtitle"},[t._v("\n                  Tasks\n                ")]),t._v(" "),n("table",{staticClass:"table is-narrow"},[n("thead"),t._v(" "),n("tbody",t._l(t.batchIpfs.tasks,(function(e){return n("tr",{key:e.link_id},[n("td",[t._v(t._s(e.tweet_id))])])})),0)]),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"subtitle"},[t._v("\n                  Results ("+t._s(t.batch.tasks_done)+"/"+t._s(t.batch.num_tasks*t.batch.repetitions)+")\n                ")]),t._v(" "),t.results&&t.results.length>0?n("div",[n("table",{staticClass:"table",staticStyle:{width:"100%"}},[t._m(0),t._v(" "),n("tbody",t._l(t.results,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.id))]),t._v(" "),n("td",[t._v(t._s(e.data))]),t._v(" "),n("td",[t._v(t._s(e.submitted_on))])])})),0)])]):n("div",[t._v("\n                  No results yet, please wait while someone start working on your order.\n                ")])])])])]):n("div",[n("p",[t._v("No batch found")])])])])])])}),[function(){var t=this,n=t._self._c;return n("thead",[n("tr",[n("th",[t._v("ID")]),t._v(" "),n("th",[t._v("Result")]),t._v(" "),n("th",[t._v("Submitted on")])])])}],!1,null,null,null);n.default=component.exports},301:function(t,n){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},363:function(t,n){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},364:function(t,n){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(n){return"function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?t.exports=r=function(t){return e(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)},r(n)}t.exports=r},391:function(t,n,e){var r=e(433),o=e(434),c=e(435);t.exports=function(t,i){return r(t)||o(t,i)||c()}},433:function(t,n){t.exports=function(t){if(Array.isArray(t))return t}},434:function(t,n){t.exports=function(t,i){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],e=!0,r=!1,o=void 0;try{for(var c,l=t[Symbol.iterator]();!(e=(c=l.next()).done)&&(n.push(c.value),!i||n.length!==i);e=!0);}catch(t){r=!0,o=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw o}}return n}}},435:function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},437:function(t,n){t.exports=function(t){if(Array.isArray(t)){for(var i=0,n=new Array(t.length);i<t.length;i++)n[i]=t[i];return n}}},438:function(t,n){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},439:function(t,n){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},455:function(t,n){},457:function(t,n){},458:function(t,n){},462:function(t,n){},464:function(t,n){},471:function(t,n){},472:function(t,n){},482:function(t,n){},483:function(t,n){},487:function(t,n){(function(n){t.exports=n}).call(this,{})},489:function(t,n){},497:function(t,n){},498:function(t,n){},504:function(t,n){},506:function(t,n){},535:function(t,n){},537:function(t,n){},558:function(t,n){},575:function(t,n){},581:function(t,n,e){var r=e(437),o=e(438),c=e(439);t.exports=function(t){return r(t)||o(t)||c()}}}]);