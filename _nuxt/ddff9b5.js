(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1060:function(t,e,n){t.exports=n.p+"img/loading.6f1e3af.svg"},1068:function(t,e,n){"use strict";n.r(e);n(86);var o=n(12),r=(n(53),n(87),n(418)),c={data:function(){return{env:"mainnet",loading:!0,effectsdk:null,id:parseInt(this.$route.params.id),tasks:null,submissions:null,timer:null,batch:null,batchIpfs:null,campaign:null,resultModal:!1,dataModal:null,imageModal:"https://effect.network/img/logo/effect-force.png"}},computed:{batchPercentageDone:function(){return this.batch?Math.round(this.batch.tasks_done/(this.batch.num_tasks*this.batch.repetitions)*100):0}},mounted:function(){var t=this;this.effectsdk=new r.EffectClient(this.env),this.getBatch(),this.getResults(),this.timer=setInterval((function(){t.getResults()}),3e4)},beforeDestroy:function(){clearInterval(this.timer)},methods:{getBatch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,console.log("getBatch",t.id),e.next=4,t.effectsdk.force.getBatchById(t.id).catch(console.error);case 4:return t.batch=e.sent,console.log("batch",t.batch),e.next=8,t.effectsdk.force.getIpfsContent(t.batch.content.field_1).catch(console.error);case 8:return t.batchIpfs=e.sent,console.log("batchIpfs",t.batchIpfs),e.next=12,t.effectsdk.force.getCampaign(t.batch.campaign_id).catch(console.error);case 12:t.campaign=e.sent,console.log("campaign",t.campaign),t.loading=!1,console.log("getBatch",t.batch,t.batchIpfs,t.campaign);case 16:case"end":return e.stop()}}),e)})))()},getResults:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Retrieving results."),n=0,t.submissions&&(n=t.submissions.length),e.next=5,t.effectsdk.force.getSubmissionsOfBatch(t.id);case 5:t.submissions=e.sent,console.log("results",t.submissions),t.submissions.length!==n&&(console.log("Retrieving new results."),t.getBatch());case 8:case"end":return e.stop()}}),e)})))()},viewResult:function(data){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.resultModal=!0,n=JSON.parse(data),e.next=4,t.effectsdk.force.getIpfsContent(null==n?void 0:n.hash);case 4:o=e.sent,t.dataModal=null==o?void 0:o.data,t.imageModal=null==o?void 0:o.image_url;case 7:case"end":return e.stop()}}),e)})))()}}},l=n(57),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"section"},[e("div",{staticClass:"columns pt-6"},[e("div",{staticClass:"column is-three-fifths is-offset-one-fifth"},[e("h2",{staticClass:"title"},[t._v("\n        Order\n      ")]),t._v(" "),e("nav",{staticClass:"breadcrumb"},[e("ul",[e("li",[e("nuxt-link",{attrs:{to:"/"}},[t._v("Home")])],1),t._v(" "),e("li",[e("nuxt-link",{attrs:{to:"/batch"}},[t._v("Orders")])],1),t._v(" "),e("li",[e("nuxt-link",{staticClass:"is-active",attrs:{to:"#"}},[t._v("ID")])],1)])]),t._v(" "),t.loading?e("div",{staticClass:"loading-text"},[t._v("\n        Loading\n      ")]):e("div",[t.batch&&t.campaign?e("div",[e("div",{staticClass:"box media p-6"},[e("div",{staticClass:"media-content"},[e("div",{staticClass:"content"},[e("p",{staticClass:"subtitle has-text-black"},[e("a",{attrs:{href:"https://app.effect.network/campaigns/".concat(t.batch.campaign_id),target:"_blank",rel:"noopener noreferrer"}},[e("span",{staticClass:"icon-text"},[e("span",{staticClass:"is-underlined"},[t._v(t._s(t.campaign.info.title))]),t._v("\n                       \n                      "),e("span",[e("font-awesome-icon",{staticClass:"icon is-small",attrs:{icon:"fa-solid fa-arrow-up-right-from-square"}})],1)])])]),t._v(" "),e("hr"),t._v(" "),e("p",{staticClass:"subtitle has-text-black"},[t._v("\n                  Details\n                ")]),t._v(" "),e("div",{staticClass:"px-6"},[e("table",{staticClass:"table is-narrow is-centered"},[e("thead"),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("\n                          Order-ID\n                        ")]),t._v(" "),e("td",[e("a",{attrs:{href:"`https://app.effect.network/${id}`",target:"_blank",rel:"noopener noreferrer"}},[e("span",{staticClass:"is-underlined"},[t._v(t._s(t.id))]),t._v(" "),e("span",{staticClass:"icon"},[e("font-awesome-icon",{staticClass:"icon is-small",attrs:{icon:"fa-solid fa-arrow-up-right-from-square"}})],1)])])]),t._v(" "),e("tr",[e("td",[t._v("\n                          Status\n                        ")]),t._v(" "),e("td",[t._v("\n                          "+t._s(t.batchPercentageDone)+"% (complete)\n                        ")])]),t._v(" "),e("tr",[e("td",[t._v("Tasks")]),t._v(" "),e("td",[t._v(t._s(t.batch.num_tasks)+" ×")])]),t._v(" "),e("tr",[e("td",[t._v("Amount")]),t._v(" "),e("td",[t._v(t._s(t.batch.repetitions)+" ×")])]),t._v(" "),e("tr",[e("td",[t._v("Cost per Task")]),t._v(" "),e("td",[e("strong",[t._v(t._s(t.campaign.info.reward)+" EFX")])])])]),t._v(" "),e("tfoot",[e("tr",[e("td",[t._v("Total Cost")]),t._v(" "),e("td",[e("strong",[t._v(t._s(t.batch.balance.quantity))])])])])])]),t._v(" "),e("hr"),t._v(" "),e("p",{staticClass:"subtitle has-text-black"},[t._v("\n                  Results ("+t._s(t.batch.tasks_done)+"/"+t._s(t.batch.num_tasks*t.batch.repetitions)+")\n                ")]),t._v(" "),e("progress",{directives:[{name:"show",rawName:"v-show",value:t.submissions&&t.submissions.length>0,expression:"submissions && submissions.length > 0"}],staticClass:"progress is-primary",attrs:{max:"100"},domProps:{value:t.batchPercentageDone}},[t._v("\n                  "+t._s(t.batchPercentageDone)+"\n                ")]),t._v(" "),t.submissions&&t.submissions.length>0?e("div",{staticClass:"table-container px-6"},[e("table",{staticClass:"table"},[t._m(0),t._v(" "),e("tbody",t._l(t.submissions,(function(n){return e("tr",{key:n.id},[e("td",[e("a",{attrs:{href:"https://app.effect.network/campaigns/".concat(t.batch.campaign_id,"/").concat(n.batch_id),target:"_blank",rel:"noopener noreferrer"}},[t._v("\n                            "+t._s(n.id)+"\n                          ")])]),t._v(" "),e("td",[t._v(t._s(n.submitted_on))]),t._v(" "),e("td",[e("button",{staticClass:"button is-link is-small is-rounded",on:{click:function(e){return e.preventDefault(),t.viewResult(n.data)}}},[t._v("\n                            View\n                          ")])])])})),0)])]):e("div",{staticClass:"has-text-centered"},[t._v("\n                  No results yet, please wait while someone starts working on your order.\n                ")])])])])]):e("div",[e("p",[t._v("No batch found")])])])]),t._v(" "),e("div",{staticClass:"modal",class:{"is-active":t.resultModal}},[e("div",{staticClass:"modal-background",on:{click:function(e){e.preventDefault(),t.resultModal=!1}}},[e("div",{staticClass:"modal-card p-6"},[e("header",{staticClass:"modal-card-head"},[e("p",{staticClass:"modal-card-title"},[t._v("\n              Image Label Results\n            ")]),t._v(" "),e("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(e){e.preventDefault(),t.resultModal=!1}}})]),t._v(" "),e("section",{staticClass:"modal-card-body"},[e("div",{staticClass:"modal-content mx-auto has-text-centered",staticStyle:{"max-width":"80%"}},[null===t.imageModal||void 0===t.imageModal?e("img",{staticClass:"mx-auto",attrs:{src:n(1060)}}):e("img",{staticClass:"mx-auto",attrs:{src:t.imageModal,alt:"",srcset:""}})]),t._v(" "),e("hr"),t._v(" "),null===t.dataModal||void 0===t.dataModal?e("div",[t._v("\n              Loading...\n            ")]):e("div",[e("div",{staticClass:"table-container"},[e("table",{staticClass:"table mx-auto"},[t._m(1),t._v(" "),e("tbody",t._l(t.dataModal,(function(n){return e("tr",{key:n.id},[e("td",[e("img",{staticStyle:{width:"100px"},attrs:{src:n.croppedCanvas}})]),t._v(" "),e("td",[t._v(t._s(n.label))])])})),0)])])])]),t._v(" "),e("footer",{staticClass:"modal-card-foot"})])])])])])}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("ID")]),t._v(" "),e("th",[t._v("Submitted on")]),t._v(" "),e("th",[t._v("Result")])])])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("Image")]),t._v(" "),e("th",[t._v("Label")])])])}],!1,null,null,null);e.default=component.exports},314:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},362:function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},363:function(t,e){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=o=function(t){return n(t)}:t.exports=o=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},o(e)}t.exports=o},380:function(t,e,n){var o=n(381),r=n(382),c=n(383);t.exports=function(t,i){return o(t)||r(t,i)||c()}},381:function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},382:function(t,e){t.exports=function(t,i){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],n=!0,o=!1,r=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done)&&(e.push(c.value),!i||e.length!==i);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==l.return||l.return()}finally{if(o)throw r}}return e}}},383:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},385:function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var i=0,e=new Array(t.length);i<t.length;i++)e[i]=t[i];return e}}},386:function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},387:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},422:function(t,e){},423:function(t,e){},424:function(t,e){},426:function(t,e){},428:function(t,e){},431:function(t,e){},432:function(t,e){},437:function(t,e){},438:function(t,e){},441:function(t,e){(function(e){t.exports=e}).call(this,{})},442:function(t,e){},443:function(t,e){},444:function(t,e){},445:function(t,e){},446:function(t,e){},452:function(t,e){},453:function(t,e){},462:function(t,e){},472:function(t,e){},475:function(t,e,n){var o=n(385),r=n(386),c=n(387);t.exports=function(t){return o(t)||r(t)||c()}}}]);